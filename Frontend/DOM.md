## 1. DOM

문서 객체 모델(Document Object Model, DOM)은 XHTML, HTML 문서용 API이다. DOM은 일종의 인터페이스로 해당 요소를 나타내는 노드, 노드의 속성을 나타내는 프로퍼티와 이를 조작할 수 있는 여러 메서드를 담아 구조화한 객체로 표현한다. 또한 DOM을 통해 자바스크립트와 같은 여러 프로그래밍 언어로 해당 요소에 접근해 해당 구조나 내용, 스타일을 변경할 수 있다. DOM이 없다면 자바스크립트는 웹 페이지에 대한 정보를 얻을 수 없다.

DOM API는 `Document` 를 통해 사용할 수 있다. Document는 DOM 트리의 진입점이자 브라우저가 불러온 웹 페이지를 의미하는 Document 인터페이스를 의미한다.

## 1.1 DOM 트리

DOM은 문서를 노드의 계층적인 트리 구조로 나타낸다. 노드는 서로 다른 특징, 데이터, 메서드를 가지며 다른 노드와의 관계가 있을 수 있다. 이런 관계는 계층을 생성하고 특정 노드에 뿌리를 둔 트리 노드로 표현된다. 노드 트리의 최상위 노드를 `root` 라 하며 일반적으로 HTML 문서에서 `<html>` 이 `root 노드` 가 된다.

```html
<!DOCTYPE html>
<html>
  <head>
    <title>DOM에 대해 공부하자</title>
  </head>
</html>
```

## 1.2 Node

노드 인터페이스는 전체 문서의 요소들에 대한 객체 형태의 기본 데이터 타입이다. DOM 트리의 구성 요소를 나타내며 nodeType이나 nodeName, nodeValue, 자식 노드와 형제 노드에 대한 관계 등 여러 정보를 갖는다. 또한 `appendChild(), removeChild()` 같은 노드 조작 메서드 등을 사용할 수 있다.

노드 인터페이스는 트리 형태의 계층 구조가 존재하는데, 계층 구조의 제일 꼭대기에는 `EventTarget` 이 존재한다. 이 `EventTarget` 추상 클래스는 이벤트가 발생했을 때 대상이 되는 타깃을 의미한다. `Node`는 `EventTarget` 을 상속받은 추상 클래스로 DOM 노드의 기초가 된다.

> Object(일반 객체) <-- EventTarget <-- Node <-- Element <-- HTMLElement <-- HTMLSelectElement

## 1.3 Event 객체

Event 객체는 DOM 내에서 발생한 이벤트에 대한 정보를 담고 있다. Event 객체는 발생한 이벤트의 종류부터 요소에 대한 정보, 캡처링 여부, 이벤트 발생 위치 등 여러 정보를 갖고 있다.

이벤트가 발생한 요소에 접근하고 싶은 경우, `target` 혹은 `currentTarget` 프로퍼티를 통해 접근할 수 있다.

- target: 이벤트가 처음 발생했던 대상 DOM 요소의 참조를 갖는다.
- currentTarget: 발생한 이벤트가 등록된 DOM 요소의 참조를 갖는다.

## 1.4 버블링과 캡처링

계층적 구조를 가진 DOM에 이벤트가 발생할 경우 연쇄적으로 이벤트가 전파(Propagation)된다. 그리고 이벤트가 전파되는 방향에 따라 버블링(Bubbling)과 캡처링(Capturing)으로 구분된다.

### 버블링

DOM 요소에 이벤트가 발생할 경우 *부모 요소로 올라가며 차례대로 이벤트가 전파되는 흐름*을 버블링이라고 한다. 대부분의 이벤트는 버블링을 기본 동작으로 갖는다.

### 캡처링

버블링과 반대로 DOM 요소에 이벤트가 발생할 경우 가장 상위의 부모 요소부터 자식 요소로 내려가며 이벤트가 전파되는 것을 캡처링이라 한다. `addEventListener()` 의 세 번째 옵션을 통해 이벤트 리스너를 캡처링 단계에서 실행시킬 수 있다.

표준 DOM의 이벤트는 캡처링, 타킷, 버블링의 흐름 순서를 갖는다. 만약 특정 DOM 요소에 등록된 이벤트 리스너가 버블링과 캡처링을 모두 사용한다면 DOM 이벤트 흐름 순서를 명확히 이해해야한다.
