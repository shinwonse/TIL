## Generator (생성기 함수)
```Generator```는 기존의 함수들과 많이 다르다. 함수라고 하면 코드의 묶음인데, 그 함수는 인자를 받을 수 있고 그 값을 가지고 일을 수행하고 그에 대한 결과를 호출한 곳에 반환해준다. 하지만 ```Generator```는 이 개념을 조금 더 많이 확장한다. 다른 모든 함수는 값을 반환하면 함수가 종료되지만, ```Generator```는 함수가 종료될 수도, 종료되지 않을 수 있고, 이것에 대한 결정을 할 수 있다. 영원히 종료되지 않게 디자인할 수도 있고 몇 번의 반환 끝에 종료될 수도 있고, 일반 함수처럼 한번 반환하고 종료될 수 있다. 

```javascript
function* inifiniteEnergyGenerator() {
  let energy = 1;
  while (true) {
    const booster = yield energy;

    if (booster) {
      energy += booster;
    } else {
      energy++;
    }
  }
}

const energyGenerator = inifiniteEnergyGenerator();

for (let i = 0; i < 5; i++) {
  console.log(energyGenerator.next());
}

console.log(energyGenerator.next(5));
```

언뜻 보면 ```return``` 문도 없고 영원히 종료되지 않는 함수인 것처럼 보인다. 그리고 ```yield``` 라는 생소한 키워드도 보인다.
<img width="534" alt="스크린샷 2022-01-13 오후 4 19 48" src="https://user-images.githubusercontent.com/62709718/149283746-0e1b9000-c612-466b-be3e-66beaee964f3.png">
위 코드를 실행해보면 이와 같이 객체를 반환한다. 제너레이터 함수는 일반적인 함수와 달리 첫번째에 호출될 때 자기 자신을 실행시키지 않는다. 정확히는 실행시키는데 필요한 도구를 갖고있는 객체를 만들어서 넘겨준다. 그래서 바로 ```energyGenerator``` 라고 하는 상수에 담긴 객체가 그 도구를 담고 있는 객체이다. 그 객체 안에는 여러가지 도구들이 있는데 핵심적인 것은 ```next``` 라고 하는 메소드이다. ```next``` 는 제너레이터 함수 본체의 실행을 재개시킬 수 있는 메소드이다.

그래서 코드를 다시 살펴보면 ```energyGenerator``` 가 ```next()``` 를 만나서 ```infiniteEnergyGenerator``` 제너레이터 함수를 실행시킨다. 그러다가 ```yield``` 키워드를 만나는데 ```yield``` 는 이 함수를 종료시키는 것이 아니라 중지시킨다. 이렇게 멈춘 상태에서 ```yield``` 뒤에 있는 값을 호출자에게 돌려준다. 따라서 ```next()``` 의 반환값으로 에너지값을 돌려주는 것이다. 마치 ```next``` 가 리턴한 것처럼. 그런데 단순하게 이 에너지값을 그대로 돌려주는 것이 아니라 객체로 한번 포장을 한다. 그게 어떤 객체냐 하면 위의 캡쳐본에서처럼 ```value``` 에 ```yield``` 뒤의 값을 넣어주고 ```done``` 이라는 속성과 함께 ```next```의 반환값으로 돌려준다. 그 다음에 ```for문``` 을 돌면서 다시 ```next``` 를 만나고 대입문을 재개한다.

실제로는 무한루프이지만 일반적인 함수와 다르게 ```yield``` 를 만나면 멈춰있는 것이다. 다음 ```next``` 가 호출될 때까지. 함수가 멈춰있다가 다시 재개될 때 기존의 함수 상태를 그대로 유지하고 있기 때문에 energy값을 클로즈 안에 가둬두고 쓰는 테크닉을 사용할 필요가 없다.

그렇다면 ```done``` 은 어느 상황에서 ```true``` 가 되는가? 그것은 바로 제너레이터 안에서 ```return``` 문을 만날 때이다. ```return``` 을 만나면 ```done``` 속성을 ```true``` 로 바꾸고 함수를 종료한다.
