## 코드 스플리팅

리액트 프로젝트를 완성하여 사용자에게 제공할 때는 **빌드 작업**을 거쳐서 배포해야 한다. 
빌드 작업을 통해 프로젝트에서 사용되는 자바스크립트 파일 안에서 **불필요한 주석, 경고 메시지, 공백 등을 제거하여 파일 크기를 최소화**하기도 하고,
브라우저에서 JSX 문법이나 다른 최신 자바스크립트 문법이 원활하게 실행되도록 **코드의 트랜스파일 작업**도 할 수 있다. 만약 프로젝트 내에 이미지와 같은 **정적 파일이 있다면 해당 파일을 위한 경로도 설정**된다.

이 작업은 ```웹팩(webpack)```이라는 도구가 담당한다. 웹팩에서 별도의 설정을 하지 않으면 프로젝트에서 사용 중인 모든 자바스크립트 파일이 하나의 파일로 합쳐지고, 모든 CSS 파일도 하나의 파일로 합쳐진다.

CRA로 프로젝트를 빌드할 경우 최소 두 개 이상의 자바스크립트 파일이 생성되는데, CRA의 기본 웹팩 설정에는 ```SplitChunks```라는 기능이 적용되어 ```node_modules```에서 불러온 파일, 일정 크기 이상의 파일,
여러 파일 간에 공유된 파일을 자동으로 따로 분리시켜서 캐싱의 효과를 제대로 누릴 수 있게 해준다.

![스크린샷 2021-12-01 오후 1 22 35](https://user-images.githubusercontent.com/62709718/144171367-90cab0aa-9e18-4a2e-b60f-927469b75f39.png)

리액트 프로젝트를 생성해서 빌드해본 모습이다. 파일 이름을 보면 '7ff6ea4d' 같은 해시(hash) 값이 포함되어 있다. 이 값은 빌드하는 과정에서 해당 파일의 내용에 따라 생성되며, 이를 통해 브라우저가 새로 파일을 받아야 할지 받지 말아야 할지를 알 수 있다.

현재 2로 시작하는 파일에는 ```React```, ```ReactDOM``` 등 ```node_modules```에서 불러온 라이브러리 관련 코드가 들어 있고, main으로 시작하는 파일에는 직접 프로젝트에 작성하는 App 같은 컴포넌트에 대한
코드가 들어 있다. 파일을 직접 한 번씩 열어보면,

![스크린샷 2021-12-01 오후 1 27 26](https://user-images.githubusercontent.com/62709718/144171800-153e4d5a-5b06-47ed-ae0a-ca96b0812829.png)
![스크린샷 2021-12-01 오후 1 31 10](https://user-images.githubusercontent.com/62709718/144172127-2144fcc5-d8b2-4660-9494-9c8240a446f5.png)

보다시피 2로 시작하는 파일은 코드가 엄청나게 긴 반면, main으로 시작하는 파일은 코드가 매우 짧다.

조금 전 언급했던 ```SplitChunks```라는 웹팩기능을 통해 자주 바뀌지 않는 코드들이 2로 시작하는 파일에 들어 있기 때문에 캐싱의 이점을 더 오래 누릴 수 있다.
